# 1. Проверка списка репозиториев
echo "=== Пункт 1: Подключенные репозитории ==="
cat /etc/apt/sources.list | grep "^deb"
ls -la /etc/apt/sources.list.d/

# 2. Проверка обновления кэша
echo "=== Пункт 2: Результат apt update ==="
tail -5 /var/log/apt/history.log | grep "Start-Date" || echo "Кэш обновлен (ошибок нет)"

# 3. Проверка информации о build-essential
echo "=== Пункт 3: Информация о пакете ==="
apt show build-essential | grep -E "Package|Version|Description"

# 4. Проверка установки build-essential
echo "=== Пункт 4: Установленные компоненты ==="
dpkg -l | grep build-essential
which gcc g++ make
gcc --version | head -1

# 5. Проверка поиска пакета bastet
echo "=== Пункт 5: Найденный пакет ==="
apt-cache search "clone with a bastard algorithm" | grep bastet

# 6. Проверка скачанных исходников
echo "=== Пункт 6: Исходные коды ==="
ls -la ~/bastet-source/
ls -la ~/bastet-source/bastet-*/

# 7. Проверка компиляции
echo "=== Пункт 7: Результат компиляции ==="
ls -la ~/bastet-source/bastet-*/bastet
file ~/bastet-source/bastet-*/bastet

# 8. Проверка установки и прав доступа
echo "=== Пункт 8: Установленный bastet ==="
which bastet
ls -l /usr/local/bin/bastet
stat -c "%a %n" /usr/local/bin/bastet

# 9. Проверка доступа для всех пользователей
echo "=== Пункт 9: Проверка прав доступа ==="
ls -l /usr/local/bin/bastet
echo "Права должны быть: -rwxr-xr-x (755) или u=rwx,g=rx,o=rx"
sudo -u nobody /usr/local/bin/bastet --version 2>&1 | head -1 || echo "Программа запускается (может требовать аргументы)"

# 10. Проверка файла task10.log
echo "=== Пункт 10: Список установленных пакетов ==="
ls -l task10.log
wc -l task10.log
head -5 task10.log

# 11. Проверка файла task11.log (зависимости gcc)
echo "=== Пункт 11: Зависимости gcc ==="
ls -l task11.log
grep -c "Depends:" task11.log
head -10 task11.log

# 12. Проверка файла task12.log (обратные зависимости libgpm2)
echo "=== Пункт 12: Обратные зависимости libgpm2 ==="
ls -l task12.log
head -10 task12.log

# 13. Проверка локального репозитория
echo "=== Пункт 13: Файлы в локальном репозитории ==="
ls -la ~/localrepo/
ls -la ~/localrepo/*.deb | wc -l

# 14. Проверка файлов Packages и Release
echo "=== Пункт 14: Индексы репозитория ==="
ls -la ~/localrepo/Packages*
cat ~/localrepo/Release | head -5
grep -c "Package:" ~/localrepo/Packages

# 15. Проверка подключения репозитория
echo "=== Пункт 15: Подключенный локальный репозиторий ==="
cat /etc/apt/sources.list.d/localrepo.list
apt-cache policy | grep -A 3 "localrepo"

# 16. Проверка информации о репозиториях
echo "=== Пункт 16: Информация о репозиториях ==="
apt-cache policy | grep -E "repo|http|file" | head -15

# 17. Проверка файла task16.log (версии htop)
echo "=== Пункт 17: Доступные версии htop ==="
ls -l task16.log
cat task16.log
apt-cache policy htop

# 18. Проверка установленной версии htop
echo "=== Пункт 18: Установленная версия htop ==="
htop --version
dpkg -l | grep htop
apt-cache policy htop | grep "Installed"

# 19. Проверка модифицированного nano
echo "=== Пункт 19: Модифицированный nano ==="
ls -la /usr/local/bin/newnano
file /usr/local/bin/newnano
which newnano
dpkg -l | grep nano
cat /var/lib/dpkg/info/nano.postinst 2>/dev/null || echo "Проверьте postinst скрипт"

# 20. Проверка бонусного вопроса
echo "=== Пункт 20: Бонусный вопрос ==="
ls -l bonus.txt
cat bonus.txt
